(window.webpackJsonppuhelinluettelo=window.webpackJsonppuhelinluettelo||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},22:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(15),a=n(3),u=n(0),c=n.n(u),o=n(16),i=n.n(o),l=function(e){var t=e.ihmiset,n=e.poistaTyyppi;return t.map((function(e){return c.a.createElement("div",{key:e.name},c.a.createElement("b",null,e.name)," ",e.number," ",c.a.createElement("button",{onClick:function(t){return n(e.id)}},"Delete"))}))},s=function(e){var t=e.persons,n=e.poistaTyyppi;return c.a.createElement("div",null,c.a.createElement(l,{ihmiset:t,poistaTyyppi:n}))},p=function(e){var t=e.lisaaTyyppi,n=e.newName,r=e.handlaaTyyppi,a=e.newNumber,u=e.handlaaNumba;return c.a.createElement("form",{onSubmit:t},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:n,onChange:r})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:a,onChange:u})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Add")))},m=function(e){var t=e.handlaaFiltteri;return c.a.createElement("div",null,"Filter names:",c.a.createElement("input",{onChange:t}))},f=(n(22),n(2)),d=n.n(f),b=n(4),v=n(5),h=n.n(v),y="/api/persons",w={getAll:function(){var e=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.a.get(y),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.a.post(y,t),e.next=3,n;case 3:return r=e.sent,console.log(r,"response"),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),del:function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.a.delete("".concat(y,"/").concat(t)),e.next=3,n;case 3:return r=e.sent,console.log(r,"response"),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(b.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.a.put("".concat(y,"/").concat(t),n),e.next=3,r;case 3:return a=e.sent,console.log(a,"updateresponse"),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E=function(e){var t=e.message,n=e.tyyli;return null===t?null:c.a.createElement("div",{className:n},t)};i.a.render(c.a.createElement((function(){var e=Object(u.useState)([]),t=Object(a.a)(e,2),n=t[0],o=t[1],i=Object(u.useState)(""),l=Object(a.a)(i,2),f=l[0],d=l[1],b=Object(u.useState)(""),v=Object(a.a)(b,2),h=v[0],y=v[1],j=Object(u.useState)(null),g=Object(a.a)(j,2),k=g[0],T=g[1],x=Object(u.useState)(""),P=Object(a.a)(x,2),N=P[0],S=P[1];Object(u.useEffect)((function(){w.getAll().then((function(e){o(e)}))}),[]);return c.a.createElement("div",null,c.a.createElement("h1",null,"Phonebook"),c.a.createElement(E,{message:k,tyyli:N}),c.a.createElement("div",null,c.a.createElement(m,{onChange:function(e){var t=n.filter((function(t){return t.name.toLowerCase().indexOf(e.target.value.toLowerCase())>=0}));o(t)}})),c.a.createElement("h2",null,"Add a new number"),c.a.createElement("div",null,c.a.createElement(p,{lisaaTyyppi:function(e){if(e.preventDefault(),n.some((function(e){return e.name===f}))&&n.some((function(e){return e.number!==h}))){if(window.confirm("".concat(f," is already added to the phonebook. Replace the old number with a new one?"))){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.find((function(e){return e.name===f})),{number:h});w.update(t.id,t).then((function(e){o(n.map((function(n){return n.id!==t.id?n:e})))})),S("errorG"),T("Updated '".concat(t.name,"' ")),setTimeout((function(){T(null)}),5e3)}else y(""),d("")}else{var a={name:f,number:h};w.create(a).then((function(e){o(n.concat(e)),y(""),d("")})),S("errorG"),T("added '".concat(a.name,"' ")),setTimeout((function(){T(null)}),5e3)}},newName:f,handlaaTyyppi:function(e){d(e.target.value)},newNumber:h,handlaaNumba:function(e){y(e.target.value)}})),c.a.createElement("h2",null,"Numbers"),c.a.createElement("div",null,c.a.createElement(s,{persons:n,poistaTyyppi:function(e){var t=n.find((function(t){return t.id===e}));if(window.confirm("Poistetaanko '".concat(t.name,"' "))){var r=n.filter((function(t){return t.id!==e}));w.del(e).then((function(e){o(r)})).catch((function(e){S("error"),T("'".concat(t.name,"' is already deleted from the server")),setTimeout((function(){T(null)}),5e3),o(r)})),T("Deleted '".concat(t.name,"'")),setTimeout((function(){T(null)}),5e3)}}})))}),null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.d1c1eab5.chunk.js.map